version: 2
name: platform_improve
notes: >
  Process-only manifest: ingest latest code into Graphiti/FalkorDB,
  have agents propose improvements, converge on one, implement it on a branch,
  review it, and open a PR.

defaults:
  data:
    tokenizer: llama
  logging:
    instrument: rich
  runtime:
    save_every: 500

targets:
  - type: process
    name: improve_platform
    description: "Autonomous platform improvement pipeline (ingest → ideate → implement → review → PR)."
    team:
      research_team_leader: research_lead
      ideator_architect: ideator_architect
      ideator_catalyst: ideator_catalyst
      ideator_ml: ideator_ml
      file_selector: file_selector
      developer: developer
      verifier: verifier
    process:
      type: platform_improve
      name: improve_platform
      topic: "Come up with ONE high-impact Caramba platform improvement and implement it safely."
      ingest_agent: research_team_leader
      index_namespace: main
      ingest_repo: true
      ingest_models: false
      max_files: 250
      max_chars_per_file: 4000
      leader: research_team_leader
      ideators: [ideator_architect, ideator_catalyst, ideator_ml]
      developer: developer
      verifier: verifier
      base_branch: main
      branch_prefix: agent/platform-improve
      tests: ["python -m pytest -q"]
      max_review_rounds: 2
      open_pr: true
      pr_title_prefix: "[caramba] "
      workspace:
        image: caramba-dev-agent:latest
        container_name: caramba-dev-agent
        workdir: /work
        repo_url: https://github.com/theapemachine/caramba.git
        repo_dir: repo
        git_remote: origin
        github_token_path: .secrets/github_token.txt

